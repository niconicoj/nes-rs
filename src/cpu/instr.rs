use super::{addr_mode::AddrMode, op::Op};

#[derive(Debug, Clone, Copy)]
pub struct Instr(AddrMode, Op, u8);

impl Instr {
    pub fn addr_mode(&self) -> AddrMode {
        self.0
    }
    pub fn op(&self) -> Op {
        self.1
    }
    pub fn cycles(&self) -> u8 {
        self.2
    }
}

impl From<u8> for Instr {
    fn from(byte: u8) -> Self {
        INSTRUCTION_TABLE[byte as usize]
    }
}

pub const INSTRUCTION_TABLE: [Instr; 256] = [
    Instr(AddrMode::IMM, Op::BRK, 7),
    Instr(AddrMode::IDX, Op::ORA, 6),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::NOP, 3),
    Instr(AddrMode::ZP0, Op::ORA, 3),
    Instr(AddrMode::ZP0, Op::ASL, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::PHP, 3),
    Instr(AddrMode::IMM, Op::ORA, 2),
    Instr(AddrMode::ACC, Op::ASL, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::NOP, 4),
    Instr(AddrMode::ABS, Op::ORA, 4),
    Instr(AddrMode::ABS, Op::ASL, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BPL, 2),
    Instr(AddrMode::IDY, Op::ORA, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::ORA, 4),
    Instr(AddrMode::ZPX, Op::ASL, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::CLC, 2),
    Instr(AddrMode::ABY, Op::ORA, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::ORA, 4),
    Instr(AddrMode::ABX, Op::ASL, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
    Instr(AddrMode::ABS, Op::JSR, 6),
    Instr(AddrMode::IDX, Op::AND, 6),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::BIT, 3),
    Instr(AddrMode::ZP0, Op::AND, 3),
    Instr(AddrMode::ZP0, Op::ROL, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::PLP, 4),
    Instr(AddrMode::IMM, Op::AND, 2),
    Instr(AddrMode::ACC, Op::ROL, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::BIT, 4),
    Instr(AddrMode::ABS, Op::AND, 4),
    Instr(AddrMode::ABS, Op::ROL, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BMI, 2),
    Instr(AddrMode::IDY, Op::AND, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::AND, 4),
    Instr(AddrMode::ZPX, Op::ROL, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::SEC, 2),
    Instr(AddrMode::ABY, Op::AND, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::AND, 4),
    Instr(AddrMode::ABX, Op::ROL, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
    Instr(AddrMode::IMP, Op::RTI, 6),
    Instr(AddrMode::IDX, Op::EOR, 6),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::NOP, 3),
    Instr(AddrMode::ZP0, Op::EOR, 3),
    Instr(AddrMode::ZP0, Op::LSR, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::PHA, 3),
    Instr(AddrMode::IMM, Op::EOR, 2),
    Instr(AddrMode::ACC, Op::LSR, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::JMP, 3),
    Instr(AddrMode::ABS, Op::EOR, 4),
    Instr(AddrMode::ABS, Op::LSR, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BVC, 2),
    Instr(AddrMode::IDY, Op::EOR, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::EOR, 4),
    Instr(AddrMode::ZPX, Op::LSR, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::CLI, 2),
    Instr(AddrMode::ABY, Op::EOR, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::EOR, 4),
    Instr(AddrMode::ABX, Op::LSR, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
    Instr(AddrMode::IMP, Op::RTS, 6),
    Instr(AddrMode::IDX, Op::ADC, 6),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::NOP, 3),
    Instr(AddrMode::ZP0, Op::ADC, 3),
    Instr(AddrMode::ZP0, Op::ROR, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::PLA, 4),
    Instr(AddrMode::IMM, Op::ADC, 2),
    Instr(AddrMode::ACC, Op::ROR, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IND, Op::JMP, 5),
    Instr(AddrMode::ABS, Op::ADC, 4),
    Instr(AddrMode::ABS, Op::ROR, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BVS, 2),
    Instr(AddrMode::IDY, Op::ADC, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::ADC, 4),
    Instr(AddrMode::ZPX, Op::ROR, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::SEI, 2),
    Instr(AddrMode::ABY, Op::ADC, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::ADC, 4),
    Instr(AddrMode::ABX, Op::ROR, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::STA, 6),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 6),
    Instr(AddrMode::ZP0, Op::STY, 3),
    Instr(AddrMode::ZP0, Op::STA, 3),
    Instr(AddrMode::ZP0, Op::STX, 3),
    Instr(AddrMode::ZP0, Op::XXX, 3),
    Instr(AddrMode::IMP, Op::DEY, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IMP, Op::TXA, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::STY, 4),
    Instr(AddrMode::ABS, Op::STA, 4),
    Instr(AddrMode::ABS, Op::STX, 4),
    Instr(AddrMode::ABS, Op::XXX, 4),
    Instr(AddrMode::REL, Op::BCC, 2),
    Instr(AddrMode::IDY, Op::STA, 6),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 6),
    Instr(AddrMode::ZPX, Op::STY, 4),
    Instr(AddrMode::ZPX, Op::STA, 4),
    Instr(AddrMode::ZPY, Op::STX, 4),
    Instr(AddrMode::ZPY, Op::XXX, 4),
    Instr(AddrMode::IMP, Op::TYA, 2),
    Instr(AddrMode::ABY, Op::STA, 5),
    Instr(AddrMode::IMP, Op::TXS, 2),
    Instr(AddrMode::ABY, Op::XXX, 5),
    Instr(AddrMode::ABX, Op::XXX, 5),
    Instr(AddrMode::ABX, Op::STA, 5),
    Instr(AddrMode::ABY, Op::XXX, 5),
    Instr(AddrMode::ABY, Op::XXX, 5),
    Instr(AddrMode::IMM, Op::LDY, 2),
    Instr(AddrMode::IDX, Op::LDA, 6),
    Instr(AddrMode::IMM, Op::LDX, 2),
    Instr(AddrMode::IDX, Op::XXX, 6),
    Instr(AddrMode::ZP0, Op::LDY, 3),
    Instr(AddrMode::ZP0, Op::LDA, 3),
    Instr(AddrMode::ZP0, Op::LDX, 3),
    Instr(AddrMode::ZP0, Op::XXX, 3),
    Instr(AddrMode::IMP, Op::TAY, 2),
    Instr(AddrMode::IMM, Op::LDA, 2),
    Instr(AddrMode::IMP, Op::TAX, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::LDY, 4),
    Instr(AddrMode::ABS, Op::LDA, 4),
    Instr(AddrMode::ABS, Op::LDX, 4),
    Instr(AddrMode::ABS, Op::XXX, 4),
    Instr(AddrMode::REL, Op::BCS, 2),
    Instr(AddrMode::IDY, Op::LDA, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 5),
    Instr(AddrMode::ZPX, Op::LDY, 4),
    Instr(AddrMode::ZPX, Op::LDA, 4),
    Instr(AddrMode::ZPY, Op::LDX, 4),
    Instr(AddrMode::ZPY, Op::XXX, 4),
    Instr(AddrMode::IMP, Op::CLV, 2),
    Instr(AddrMode::ABY, Op::LDA, 4),
    Instr(AddrMode::IMP, Op::TSX, 2),
    Instr(AddrMode::ABY, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::LDY, 4),
    Instr(AddrMode::ABX, Op::LDA, 4),
    Instr(AddrMode::ABY, Op::LDX, 4),
    Instr(AddrMode::ABY, Op::XXX, 4),
    Instr(AddrMode::IMM, Op::CPY, 2),
    Instr(AddrMode::IDX, Op::CMP, 6),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::CPY, 3),
    Instr(AddrMode::ZP0, Op::CMP, 3),
    Instr(AddrMode::ZP0, Op::DEC, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::INY, 2),
    Instr(AddrMode::IMM, Op::CMP, 2),
    Instr(AddrMode::IMP, Op::DEX, 2),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::ABS, Op::CPY, 4),
    Instr(AddrMode::ABS, Op::CMP, 4),
    Instr(AddrMode::ABS, Op::DEC, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BNE, 2),
    Instr(AddrMode::IDY, Op::CMP, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::CMP, 4),
    Instr(AddrMode::ZPX, Op::DEC, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::CLD, 2),
    Instr(AddrMode::ABY, Op::CMP, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::CMP, 4),
    Instr(AddrMode::ABX, Op::DEC, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
    Instr(AddrMode::IMM, Op::CPX, 2),
    Instr(AddrMode::IDX, Op::SBC, 6),
    Instr(AddrMode::IMM, Op::XXX, 2),
    Instr(AddrMode::IDX, Op::XXX, 8),
    Instr(AddrMode::ZP0, Op::CPX, 3),
    Instr(AddrMode::ZP0, Op::SBC, 3),
    Instr(AddrMode::ZP0, Op::INC, 5),
    Instr(AddrMode::ZP0, Op::XXX, 5),
    Instr(AddrMode::IMP, Op::INX, 2),
    Instr(AddrMode::IMM, Op::SBC, 2),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::IMM, Op::SBC, 2),
    Instr(AddrMode::ABS, Op::CPX, 4),
    Instr(AddrMode::ABS, Op::SBC, 4),
    Instr(AddrMode::ABS, Op::INC, 6),
    Instr(AddrMode::ABS, Op::XXX, 6),
    Instr(AddrMode::REL, Op::BEQ, 2),
    Instr(AddrMode::IDY, Op::SBC, 5),
    Instr(AddrMode::IMP, Op::XXX, 2),
    Instr(AddrMode::IDY, Op::XXX, 8),
    Instr(AddrMode::ZPX, Op::NOP, 4),
    Instr(AddrMode::ZPX, Op::SBC, 4),
    Instr(AddrMode::ZPX, Op::INC, 6),
    Instr(AddrMode::ZPX, Op::XXX, 6),
    Instr(AddrMode::IMP, Op::SED, 2),
    Instr(AddrMode::ABY, Op::SBC, 4),
    Instr(AddrMode::IMP, Op::NOP, 2),
    Instr(AddrMode::ABY, Op::XXX, 7),
    Instr(AddrMode::ABX, Op::XXX, 4),
    Instr(AddrMode::ABX, Op::SBC, 4),
    Instr(AddrMode::ABX, Op::INC, 7),
    Instr(AddrMode::ABX, Op::XXX, 7),
];
